import React from "react";

interface DownloadDropdownProps {
  onDownloadCSV: () => void;
  onDownloadXLSX: () => void;
  downloadDropdownRef?: React.RefObject<HTMLDivElement>;
}

export const DownloadDropdown: React.FC<DownloadDropdownProps> = ({
  onDownloadCSV,
  onDownloadXLSX,
  downloadDropdownRef,
}) => {
  return (
    <div
      ref={downloadDropdownRef}
      style={{
        position: "absolute",
        top: "calc(100% + 4px)",
        left: "0",
        width: "172px",
        borderRadius: "8px",
        border: "1px solid rgba(0, 0, 0, 0.08)",
        background: "#FFF",
        boxShadow:
          "0 12px 16px -4px rgba(10, 13, 18, 0.08), 0 4px 6px -2px rgba(10, 13, 18, 0.03), 0 2px 2px -1px rgba(10, 13, 18, 0.04)",
        zIndex: 9999,
      }}
    >
      <div
        style={{
          display: "flex",
          padding: "4px 0",
          flexDirection: "column",
          alignItems: "flex-start",
          alignSelf: "stretch",
        }}
      >
        {/* Download CSV */}
        <div
          style={{
            display: "flex",
            padding: "1px 6px",
            alignItems: "center",
            alignSelf: "stretch",
            cursor: "pointer",
          }}
          onMouseEnter={(e) => {
            const content = e.currentTarget.querySelector(
              ".content",
            ) as HTMLElement;
            if (content) content.style.backgroundColor = "#F5F5F5";
          }}
          onMouseLeave={(e) => {
            const content = e.currentTarget.querySelector(
              ".content",
            ) as HTMLElement;
            if (content) content.style.backgroundColor = "transparent";
          }}
          onClick={onDownloadCSV}
        >
          <div
            className="content"
            style={{
              display: "flex",
              padding: "8px",
              alignItems: "center",
              gap: "8px",
              flex: "1 0 0",
              borderRadius: "6px",
              transition: "background-color 0.2s ease",
            }}
          >
            {/* CSV File Icon */}
            <div
              style={{ width: "24px", height: "24px", position: "relative" }}
            >
              <svg
                width="20"
                height="24"
                viewBox="0 0 20 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                style={{
                  position: "absolute",
                  left: "4px",
                  top: "0px",
                }}
              >
                <path
                  d="M4.2002 0.75H12.1895L18.6504 7.20996V20C18.6504 21.7949 17.1952 23.2499 15.4004 23.25H4.2002C2.40527 23.25 0.950195 21.7949 0.950195 20V4C0.950196 2.20507 2.40527 0.75 4.2002 0.75Z"
                  stroke="#D5D7DA"
                  strokeWidth="1.5"
                />
                <path
                  d="M12.2002 0.300781V3.20078C12.2002 5.40992 13.9911 7.20078 16.2002 7.20078H19.1002"
                  stroke="#D5D7DA"
                  strokeWidth="1.5"
                />
              </svg>
              <svg
                width="28"
                height="13"
                viewBox="0 0 28 13"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                style={{
                  position: "absolute",
                  left: "-4px",
                  top: "10px",
                }}
              >
                <rect
                  x="0.597168"
                  y="0.863281"
                  width="26.8052"
                  height="11.4751"
                  rx="2"
                  fill="#079455"
                />
                <path
                  d="M10.1419 5.50888H8.58651C8.55811 5.30765 8.5001 5.12891 8.41251 4.97266C8.32491 4.81404 8.21246 4.6791 8.07515 4.56783C7.93784 4.45656 7.77922 4.37133 7.5993 4.31214C7.42174 4.25296 7.2288 4.22337 7.02046 4.22337C6.64404 4.22337 6.31615 4.31688 6.0368 4.50391C5.75744 4.68857 5.54082 4.95845 5.38694 5.31357C5.23306 5.66631 5.15612 6.09482 5.15612 6.59908C5.15612 7.11754 5.23306 7.55315 5.38694 7.9059C5.54319 8.25864 5.76099 8.52498 6.04035 8.7049C6.31971 8.88483 6.64286 8.97479 7.00981 8.97479C7.21578 8.97479 7.40635 8.94756 7.58154 8.89311C7.7591 8.83866 7.91653 8.75935 8.05384 8.65518C8.19115 8.54865 8.30479 8.41963 8.39475 8.26811C8.48708 8.1166 8.551 7.94377 8.58651 7.74965L10.1419 7.75675C10.1017 8.09055 10.0011 8.41252 9.84007 8.72266C9.68145 9.03042 9.4672 9.30623 9.19731 9.55007C8.92979 9.79155 8.61019 9.98331 8.2385 10.1254C7.86919 10.265 7.45133 10.3349 6.98495 10.3349C6.33628 10.3349 5.75626 10.1881 5.2449 9.89453C4.7359 9.60097 4.33344 9.17602 4.03751 8.61967C3.74395 8.06333 3.59717 7.3898 3.59717 6.59908C3.59717 5.80599 3.74632 5.13127 4.04461 4.57493C4.34291 4.01858 4.74774 3.59482 5.2591 3.30362C5.77046 3.01006 6.34575 2.86328 6.98495 2.86328C7.40635 2.86328 7.79698 2.92247 8.15683 3.04084C8.51904 3.15921 8.83983 3.33203 9.11919 3.5593C9.39854 3.78421 9.62581 4.06001 9.801 4.38672C9.97856 4.71342 10.0922 5.08748 10.1419 5.50888Z"
                  fill="white"
                />
                <path
                  d="M15.1899 5.05433C15.1614 4.76787 15.0395 4.54534 14.8241 4.38672C14.6086 4.2281 14.3163 4.14879 13.947 4.14879C13.696 4.14879 13.4841 4.1843 13.3113 4.25533C13.1385 4.32398 13.0059 4.41986 12.9136 4.54297C12.8236 4.66607 12.7786 4.80575 12.7786 4.962C12.7739 5.09221 12.8011 5.20585 12.8603 5.30291C12.9219 5.39998 13.0059 5.48402 13.1124 5.55504C13.219 5.6237 13.3421 5.68407 13.4818 5.73615C13.6214 5.78587 13.7706 5.82848 13.9292 5.86399L14.5826 6.02024C14.8998 6.09126 15.191 6.18596 15.4562 6.30433C15.7213 6.4227 15.951 6.5683 16.1451 6.74112C16.3392 6.91394 16.4896 7.11754 16.5961 7.35192C16.705 7.58629 16.7606 7.855 16.763 8.15803C16.7606 8.6031 16.647 8.98899 16.4221 9.3157C16.1996 9.64003 15.8776 9.89216 15.4562 10.0721C15.0372 10.2496 14.5317 10.3384 13.9399 10.3384C13.3527 10.3384 12.8414 10.2485 12.4058 10.0685C11.9725 9.88861 11.634 9.62228 11.3901 9.26953C11.1487 8.91442 11.022 8.47526 11.0102 7.95206H12.4981C12.5147 8.1959 12.5845 8.3995 12.7076 8.56286C12.8331 8.72384 13 8.84576 13.2083 8.92862C13.419 9.00911 13.6569 9.04936 13.9221 9.04936C14.1825 9.04936 14.4086 9.01148 14.6004 8.93572C14.7945 8.85997 14.9448 8.75462 15.0514 8.61967C15.1579 8.48473 15.2112 8.32966 15.2112 8.15447C15.2112 7.99112 15.1626 7.85381 15.0656 7.74254C14.9709 7.63127 14.8312 7.53658 14.6465 7.45845C14.4642 7.38033 14.2405 7.3093 13.9754 7.24538L13.1835 7.04652C12.5703 6.89737 12.0862 6.66418 11.731 6.34695C11.3759 6.02971 11.1996 5.60239 11.2019 5.06499C11.1996 4.62464 11.3167 4.23994 11.5535 3.91087C11.7926 3.58179 12.1205 3.32493 12.5372 3.14027C12.9538 2.95561 13.4273 2.86328 13.9576 2.86328C14.4974 2.86328 14.9685 2.95561 15.371 3.14027C15.7758 3.32493 16.0907 3.58179 16.3156 3.91087C16.5405 4.23994 16.6565 4.62109 16.6636 5.05433H15.1899Z"
                  fill="white"
                />
                <path
                  d="M19.1112 2.96271L20.869 8.48828H20.9365L22.6978 2.96271H24.4024L21.8953 10.2354H19.9138L17.4031 2.96271H19.1112Z"
                  fill="white"
                />
              </svg>
            </div>
            <span
              style={{
                fontFamily:
                  "Public Sans, -apple-system, Roboto, Helvetica, sans-serif",
                fontWeight: 400,
                fontSize: "14px",
                color: "#181D27",
                lineHeight: "20px",
              }}
            >
              Download CSV
            </span>
          </div>
        </div>

        {/* Download XLSX */}
        <div
          style={{
            display: "flex",
            padding: "1px 6px",
            alignItems: "center",
            alignSelf: "stretch",
            cursor: "pointer",
          }}
          onMouseEnter={(e) => {
            const content = e.currentTarget.querySelector(
              ".content",
            ) as HTMLElement;
            if (content) content.style.backgroundColor = "#F5F5F5";
          }}
          onMouseLeave={(e) => {
            const content = e.currentTarget.querySelector(
              ".content",
            ) as HTMLElement;
            if (content) content.style.backgroundColor = "transparent";
          }}
          onClick={onDownloadXLSX}
        >
          <div
            className="content"
            style={{
              display: "flex",
              padding: "8px",
              alignItems: "center",
              gap: "8px",
              flex: "1 0 0",
              borderRadius: "6px",
              transition: "background-color 0.2s ease",
            }}
          >
            {/* XLSX File Icon */}
            <div
              style={{ width: "24px", height: "24px", position: "relative" }}
            >
              <svg
                width="20"
                height="24"
                viewBox="0 0 20 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                style={{
                  position: "absolute",
                  left: "4px",
                  top: "0px",
                }}
              >
                <path
                  d="M4.2002 0.75H12.1895L18.6504 7.20996V20C18.6504 21.7949 17.1952 23.2499 15.4004 23.25H4.2002C2.40527 23.25 0.950195 21.7949 0.950195 20V4C0.950196 2.20507 2.40527 0.75 4.2002 0.75Z"
                  stroke="#D5D7DA"
                  strokeWidth="1.5"
                />
                <path
                  d="M12.2002 0.300781V3.20078C12.2002 5.40992 13.9911 7.20078 16.2002 7.20078H19.1002"
                  stroke="#D5D7DA"
                  strokeWidth="1.5"
                />
              </svg>
              <svg
                width="33"
                height="13"
                viewBox="0 0 33 13"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                style={{
                  position: "absolute",
                  left: "-5px",
                  top: "10px",
                }}
              >
                <rect
                  x="0.527832"
                  y="0.863281"
                  width="31.9446"
                  height="11.4751"
                  rx="2"
                  fill="#079455"
                />
                <path
                  d="M5.31405 2.96271L6.78067 5.44141H6.83749L8.31121 2.96271H10.0477L7.82826 6.59908L10.0974 10.2354H8.32897L6.83749 7.7532H6.78067L5.2892 10.2354H3.52783L5.80411 6.59908L3.57045 2.96271H5.31405Z"
                  fill="white"
                />
                <path
                  d="M11.0207 10.2354V2.96271H12.5584V8.96768H15.6763V10.2354H11.0207Z"
                  fill="white"
                />
                <path
                  d="M20.6399 5.05433C20.6115 4.76787 20.4895 4.54534 20.2741 4.38672C20.0587 4.2281 19.7663 4.14879 19.397 4.14879C19.146 4.14879 18.9341 4.1843 18.7613 4.25533C18.5885 4.32398 18.4559 4.41986 18.3636 4.54297C18.2736 4.66607 18.2286 4.80575 18.2286 4.962C18.2239 5.09221 18.2511 5.20585 18.3103 5.30291C18.3719 5.39998 18.4559 5.48402 18.5625 5.55504C18.669 5.6237 18.7921 5.68407 18.9318 5.73615C19.0715 5.78587 19.2206 5.82848 19.3792 5.86399L20.0326 6.02024C20.3499 6.09126 20.6411 6.18596 20.9062 6.30433C21.1714 6.4227 21.401 6.5683 21.5951 6.74112C21.7893 6.91394 21.9396 7.11754 22.0461 7.35192C22.155 7.58629 22.2107 7.855 22.213 8.15803C22.2107 8.6031 22.097 8.98899 21.8721 9.3157C21.6496 9.64003 21.3276 9.89216 20.9062 10.0721C20.4872 10.2496 19.9817 10.3384 19.3899 10.3384C18.8027 10.3384 18.2914 10.2485 17.8558 10.0685C17.4225 9.88861 17.084 9.62228 16.8402 9.26953C16.5987 8.91442 16.472 8.47526 16.4602 7.95206H17.9481C17.9647 8.1959 18.0345 8.3995 18.1576 8.56286C18.2831 8.72384 18.45 8.84576 18.6583 8.92862C18.869 9.00911 19.107 9.04936 19.3721 9.04936C19.6325 9.04936 19.8586 9.01148 20.0504 8.93572C20.2445 8.85997 20.3948 8.75462 20.5014 8.61967C20.6079 8.48473 20.6612 8.32966 20.6612 8.15447C20.6612 7.99112 20.6126 7.85381 20.5156 7.74254C20.4209 7.63127 20.2812 7.53658 20.0965 7.45845C19.9143 7.38033 19.6905 7.3093 19.4254 7.24538L18.6335 7.04652C18.0203 6.89737 17.5362 6.66418 17.1811 6.34695C16.8259 6.02971 16.6496 5.60239 16.6519 5.06499C16.6496 4.62464 16.7668 4.23994 17.0035 3.91087C17.2426 3.58179 17.5705 3.32493 17.9872 3.14027C18.4038 2.95561 18.8773 2.86328 19.4076 2.86328C19.9474 2.86328 20.4185 2.95561 20.821 3.14027C21.2258 3.32493 21.5407 3.58179 21.7656 3.91087C21.9905 4.23994 22.1065 4.62109 22.1136 5.05433H20.6399Z"
                  fill="white"
                />
                <path
                  d="M24.6891 2.96271L26.1557 5.44141H26.2125L27.6862 2.96271H29.4227L27.2033 6.59908L29.4724 10.2354H27.704L26.2125 7.7532H26.1557L24.6642 10.2354H22.9028L25.1791 6.59908L22.9454 2.96271H24.6891Z"
                  fill="white"
                />
              </svg>
            </div>
            <span
              style={{
                fontFamily:
                  "Public Sans, -apple-system, Roboto, Helvetica, sans-serif",
                fontWeight: 400,
                fontSize: "14px",
                color: "#181D27",
                lineHeight: "20px",
              }}
            >
              Download XLSX
            </span>
          </div>
        </div>
      </div>
    </div>
  );
};
